<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBM Data Merge Utility</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="css/style.css" rel="stylesheet">
</head>
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
        	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collapse">
            	<span class="sr-only">Toggle navigation</span>
                <span class="glyphicon glyphicon-arrow-down"></span>
                MENU
           </button> 
        <div class="navbar-header">
        	<a class="navbar-brand" href="#"><img src="images/IBMlogo.png"></a>
           </div>                     
        <div class="collapse navbar-collapse" id="collapse">  
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/UserGuide.html">User Guide</a></li>        
                <li><a href="/AdminGuide.html">Admin Guide</a></li>        
                <li class="active"><a href="/DevGuide.html">Dev Guide</a></li>        
                <li><a href="/Training.html">Training</a></li>        
                <li><a href="/idmu/status/">Status</a></li>        
                <li><a href="/editor/src/html/app.html">Templates</a></li>        
            </ul>
        </div>
    </nav> 
<body>    
<div class="container">    
<h1><a id="top">IBM Data Merge Utility Developer Guide</a></h1>            		
        <ul class="nav nav-pills nav-stacked">
            <li><a href="#Licensing"><strong>Licensing</strong></a></li>
            <li><a href="#Develop"><strong>Setting up your dev environment</strong></a></li>
			<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><strong>Rest API's</strong><b class="caret"></b></a>
                <ul class="dropdown-menu">
                	<li><a href="#DeleteArchive" >Delete Archive</a></li>
                    <li><a href="#DeletePackage" >Delete Template Packages</a></li>
                    <li><a href="#DeleteTemplate">Delete Template</a></li>
                    <li><a href="#GetCollections">Get Collections</a></li>
                    <li><a href="#GetDirectives" >Get Directives</a></li>
                    <li><a href="#GetMergeHtml" >Get Merge Output (text/html)</a></li>
                    <li><a href="#GetMergeText" >Get Merge Output (text/plain)</a></li>
                    <li><a href="#GetStatus"    >Get Status</a></li>          
                    <li><a href="#GetNamesColl" >Get Template Names for a Collection</a></li>
                    <li><a href="#GetNamesName" >Get Template Names for a Collection and Name</a></li>
                    <li><a href="#GetPackage"   >Get a Template</a></li>
                    <li><a href="#GetPackage"   >Get a package of templates</a></li>
                    <li><a href="#LoadPackage"  >Load a package of templates</a></li>
                    <li><a href="#PutPackage"   >Put a package of templates</a></li>
                    <li><a href="#PutPackage"   >Put a template</a></li>
                </ul> 
            </li>  
			<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><strong>Sample HTML calling IDMU</strong><b class="caret"></b></a>
                <ul class="dropdown-menu">
                	<li><a href="#Simple" >Simple Form with HTML Response</a></li>
                    <li><a href="#Download" >Form to download merge output</a></li>
                    <li><a href="#Archive">Form to download archive output</a></li>
                </ul> 
            </li>  
            <li><a href="#Testing"><strong>Regression Testing</strong></a></li>         
        </ul>
     
<section id="Licensing">                        
<h3><a>Licensing</a></h3>
        Copyright <div class="glyphicon glyphicon-copyright-mark"></div> 2015, 2015 IBM	<div class="glyphicon glyphicon-registration-mark"></div>
        <p></p>	
		<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in compliance with the License. You may obtain a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>. Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
    
		<div class="footerLink"><a href="#Top">Back To Top</a></div>	

</section>
<section id="Develop">                        
<h3><a>Development Environment</a></h3>
		<p>See the readme on the <a href="https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility">main GitHub page</a> for instructions on setting up a development environment.</p>

</section>
<section id="RestApi">                        
<h3><a>REST API</a></h3>
		<p>The following rest services are supported:</p>
		
		<section id="DeleteArchive">                        
		<h4>Delete Archive</h4>
		<p>Delete an archive that was generated as part of a merge process</p>
		<ul>
			<li>example: Delete host:port/idmu/archive/guid.tar</li>
			<li>url: host:port/idmu/archive/name where name is an archive name</li>
			<li>http request: Delete</li>
			<li>http response: 200<ul>
				<li>response type: text/plain</li>
				<li>response content: OK</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/plain</li>
				<li>response content: NOT FOUND</li>
				<li>template override: idmu.errorTemplate.DelArchive</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="DeletePackage">                        
		<h4>Delete Template Package</h4>
		<p>Delete all the templates in one or more collections</p>
		<ul>
			<li>example: Delete host:port/idmu/templatePackage/training,testing</li>
			<li>url: host:port/idmu/templatePackage/names where names is a comma separated list of package names</li>
			<li>http request: Delete</li>
			<li>http response: 200<ul>
				<li>response type: text/plain</li>
				<li>response content: OK</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/plain</li>
				<li>response content: Error Message</li>
				<li>template override: idmu.errorTemplate.DelTemplatePackage</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="DeleteTemplate">                        
		<h4>Delete Template</h4>
		<p>Delete a specific template</p>
		<ul>
			<li>example: Delete host:port/idmu/template/test..</li>
			<li>url: host:port/idmu/template/name where name is a template full name (must contain at least 2 periods)</li>
			<li>http request: Delete</li>
			<li>http response: 200<ul>
				<li>response type: text/plain</li>
				<li>response content: OK</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/plain</li>
				<li>response content: NOT FOUND</li>
				<li>template override: idmu.errorTemplate.DelTemplate</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetCollections">                        
		<h4>Get Collections</h4>
		<p>Get Template Collections</p>
		<ul>
			<li>example: Get host:port/idmu/collections</li>
			<li>url: host:port/idmu/collections</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: An array of Collection Names i.e. [{"collection":"system"},{"collection":"special"},...]</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetDirectives">
		<h4>Get Directives</h4>
		<p>Get Directives</p>
		<ul>
			<li>example: Get host:port/idmu/directives</li>
			<li>url: host:port/idmu/directives</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: An array of Directive objects i.e. [{"type": 0,"name": "Require Tags"...},{"type": 1,"name": "Replace Value",...},...]</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetMergeHtml">
		<h4>Get Merge Output (HTML)</h4>
		<p>Get Merge Output (HTML Interface)</p>
		<ul>
			<li>example: Get host:port/idmu/merge/test?name=value&amp;list=one,two,three</li>
			<li>url: host:port/idmu/merge/<em>template</em>/parameters where <em>template</em> is a template name. Note that trailing periods are not needed with this call.</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/html</li>
				<li>response content: The merge output</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/html</li>
				<li>response content: The Error Message</li>
				<li>template override: idmu.errorTemplate.GetMergeOutputHtml</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
        <section id="GetMergeText">
		<h4>Get Merge Output (TEXT)</h4>
		<p>Get Merge Output (Plain Text Interface)</p>
		<ul>
			<li>example: Get host:port/idmu/merge?DragonFlyFullName=test..?name=value&amp;list=one,two,three</li>
			<li>url: host:port/idmu/merge?DragonFlyFullName=name?parameters where name is a template full name. Note that trailing periods are required, a full name should always contain at least 2 periods.</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/plain</li>
				<li>response content: The merge output</li>
				<li>NOTE: You can specify an alternate content type in the DragonFlyFileType parameter</li>
				<li>If a filename is provided in the DragonFlyFileName parameter the http reply header will have a Content-Disposition: attachment;filename={DragonFlyFileName}</li> 
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/plain</li>
				<li>response content: The Error Message</li>
				<li>template override: idmu.errorTemplate.GetMergeOutputText</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetStatus">      
		<h4>Get Status</h4>
		<p>Get IDMU System Status</p>
		<ul>
			<li>example: Get host:port/idmu/status</li>
			<li>url: host:port/idmu/status</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/html</li>
				<li>response content: The System Status page</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/html</li>
				<li>response content: The Error Message (Missing System Templates)</li>
				<li>template override: idmu.errorTemplate.GetStatus</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetNamesColl">
		<h4>Get Template Names for Collection</h4>
		<p>Get Templates in a Collection</p>
		<ul>
			<li>example: Get host:port/idmu/templates/root</li>
			<li>url: host:port/idmu/templates/collection where collection is a collection name</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: An array of templates with the provided collection name. i.e. [{"collection":"root","name":"allDirectives","columnValue":""},{"collection":"root",...}]</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetNamesName">
		<h4>Get Names for Collection / Name</h4>
		<p>Get Templates in a Collection with a specific name</p>
		<ul>
			<li>example: Get host:port/idmu/templates/root/options</li>
			<li>url: host:port/idmu/templates/collection/name where collection is a collection, and name is a collection name</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: An array of templates with the provie collection and name. i.e. [{"collection":"root","name":"allDirectives","columnValue":""},{"collection":"root",...}]</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetPackage">
		<h4>Get Package</h4>
		<p>Get a Template Package</p>
		<ul>
			<li>example: Get host:port/idmu/templatePackage/test,system</li>
			<li>url: host:port/idmu/templatePackage/names where names is a coma seperated list of collection names</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: An array of templates from the collections. i.e. [{"collection":"root","name":"allDirectives","columnValue":""},{"collection":"root",...}]</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="GetTemplate">
		<h4>Get Template</h4>
		<p>Get a Template</p>
		<ul>
			<li>example: Get host:port/idmu/template/test..</li>
			<li>url: host:port/idmu/template/name where name is a template full name (trailing periods required)</li>
			<li>http request: Get</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: A template object. i.e. {"collection":"root","name":"allDirectives","columnValue":""...}</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/plain</li>
				<li>response content: The Error Message (NOT FOUND)</li>
				<li>template override: idmu.errorTemplate.GetTemplate</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="LoadPackage">
		<h4>Load Package</h4>
		<p>Load a Template Package</p>
		<ul>
			<li>example: Post host:port/idmu/templatePackage/test.json</li>
			<li>url: host:port/idmu/templatePackage/name where name a file in the idmu packages folder</li>
			<li>http request: Post</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: An array of the packages saved.</li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/html</li>
				<li>response content: The Error Message</li>
				<li>template override: idmu.errorTemplate.PostTemplatePackage</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="PutPackage">
		<h4>Put Package</h4>
		<p>Put a Template Package</p>
		<ul>
			<li>example: Put host:port/idmu/templatePackage?[Template Array]</li>
			<li>url: host:port/idmu/templatePackage?[templates] where templates is a json array of template objects.</li>
			<li>http request: Put</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: The template that was saved</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>
		
		<section id="PutTemplate">
		<h4>Put Template</h4>
		<p>Put a Template</p>
		<ul>
			<li>example: Put host:port/idmu/template?{template}</li>
			<li>url: host:port/idmu/template?template where template is a JSON template object</li>
			<li>http request: Pet</li>
			<li>http response: 200<ul>
				<li>response type: text/json</li>
				<li>response content: The template object that was saved. </li>
			</ul></li>
			<li>http response: 500<ul>
				<li>response type: text/plain</li>
				<li>response content: The Error Message</li>
				<li>template override: idmu.errorTemplate.PutTemplate</li>
			</ul></li>
		</ul>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>

		<h3>Sample HTML</h3>
		<section id="Simple">
		<h4>Simple Form</h4>
		<textarea rows="15" cols="132"><html>
	<head>
	</head>
	
	<body>
		<form id="merge" method="get" action="/idmu/merge/your.template">
			<ul>
				<li>Full Name<input name="FULLNAME"/></li>
				<li>Short Name<input name="SHORTNAME"/></li>
			</ul>
			<button form="merge" type="submit">Get the page</button>
		</form>
	</body>
</html></textarea>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>

		<section id="getFile">
		<h4>Get merge output as a downloaded file</h4>
		<textarea rows="18" cols="132"><html>
	<head>
	</head>
	
	<body>
		<form id="merge" method="get" action="/idmu/merge/your.template">
			<ul>
				<li>Full Name<input name="FULLNAME"/></li>
				<li>Short Name<input name="SHORTNAME"/></li>
				<li class="hidden">template<input name="DragonFlyFullName"    value="xml.template."  /></li>
				<li class="hidden">filename<input name="DragonFlyFileName"    value="newfile.xml"    /></li>
				<li class="hidden">filetype<input name="DragonFlyContentType" value="application/xml"/></li>
			</ul>
			<button form="merge" type="submit">Get the page</button>
		</form>
	</body>
</html></textarea>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>

		<section id="getArchive">
		<h4>Get merge Archive output</h4>
		<p>Use the following in a html content template that generates a archive to download (NEEDS SOME HELP).</p>
		<textarea rows="25" cols="132"><html>
	<head>
	</head>
	
	<body onload="getTheFile()">
	</body>
	<script>
	function getTheFile() {
		//java script to download {DragonFlyOutputFile}
		//java script to http:delete /idmu/archive/{DragonFlyOutputFile}
	}
	</script>
</html></textarea>
		<div class="footerLink"><a href="#top">Back To Top</a></div>
		</section>


</section>
<section id="Testing">                        
<h3><a>Regression Testing</a></h3>
	<p>Select the appropriate testing units below and click the "Get Instructions" button for instructions on regression testing.</p>
	<form>
		<ul>
			<li><input type="checkbox" name="option" value="System"> 	System								</li>
			<li><input type="checkbox" name="option" value="Safety"> 	Safety								</li>
			<li><input type="checkbox" name="option" value="csvDef">	csv from Default Data				</li>
			<li><input type="checkbox" name="option" value="csvTag">	csv from Tag Data					</li>
			<li><input type="checkbox" name="option" value="csvUrl">  	<em>csv from URL Data</em>			</li>
			<li><input type="checkbox" name="option" value="jdbcMySql"> <em>Jdbc from MySql</em>			</li>
			<li><input type="checkbox" name="option" value="jdbcDb2">   <em>Jdbc from db2</em>				</li>
			<li><input type="checkbox" name="option" value="jdbcOracle"> <em>jdbc from Oracle</em>			</li>
			<li><input type="checkbox" name="option" value="jdbcMulti"> <em>jdbc from Multi-Databases</em>	</li>
			<li><input type="checkbox" name="option" value="jndiMulti"> <em>jndi from Multi-Databases</em>	</li>
		</ul>
	<p><em>Units that require Database Configurations</em></p>
	<p><button type="button" onclick="getExecutableDoc();">Get Instructions</button></p>
	</form>
</section>		
</div><!--end of container-->
<!--javascript-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script>
function getExecutableDoc() {
	var options = $('input:checkbox:checked').map( function() {
	    return this.value;
	}).get().join(",");
	var url = "/idmu/merge/testing?options=" + options;

	window.location.href = url;
}
</script>

</body>
</html>
