swagger: '2.0'
info:
  version: 1.0.0
  title: IDMU
  description: IBM Data Merge Utility API
  license:
    name: Apache
  x-ibm-name: IBM-Data-Merge-Utility
basePath: /idmu/
paths:
  /template/:
    put:
      tags: []
      summary: ''
      description: Save a Template
      parameters:
        - schema:
            $ref: '#/definitions/template'
          description: ''
          name: body
          in: body
      responses:
        '200':
          schema:
            $ref: '#/definitions/template'
          description: Success - Template that was saved
          examples:
            application/json:
              collection: test
              name: allDirectives
              columnValue: all
              description: The Testing Template
              outputFile: ''
              content: This is the Testing Template Content
              directives:
                - tags:
                    - Foo
                    - empty
                  type: 0
                  softFail: false
                  description: TestRequire
                - from: Foobar
                  to: Test Foo Value
                  type: 1
                  softFail: false
                  description: Test Replace1
                - notLast:
                    - one
                    - two
                  onlyLast:
                    - three
                    - four
                  type: 2
                  softFail: false
                  description: TestInsertSubsTag
                  provider:
                    tag: Foo
                    condition: 0
                    list: false
                    value: bar
                    type: 2
                - notLast:
                    - one
                    - two
                  onlyLast:
                    - three
                    - four
                  type: 10
                  softFail: false
                  description: TestInsertSubsSql
                  provider:
                    source: DB
                    columns: 'Col1, Col2, Col3'
                    from: 'Table1, Table2'
                    where: Table1.value = table2.value
                    type: 1
                - type: 11
                  softFail: false
                  description: TestReplaceRowSql
                  provider:
                    source: DB
                    columns: 'Col1, Col2, Col3'
                    from: 'Table1, Table2'
                    where: Table1.value = table2.value
                    type: 1
                - fromColumn: from_col
                  toColumn: to_col
                  type: 12
                  softFail: false
                  description: TestReplaceColSql
                  provider:
                    source: DB
                    columns: 'Col1, Col2, Col3'
                    from: 'Table1, Table2'
                    where: Table1.value = table2.value
                    type: 1
                - notLast:
                    - one
                    - two
                  onlyLast:
                    - three
                    - four
                  type: 21
                  softFail: false
                  description: TestInsertSubsCsv
                  provider:
                    url: 'http://some.company.com/url/{DATA}'
                    tag: Fred
                    staticData: |-
                      A,B,C
                      1,2,3
                      4,5,6
                    type: 3
                - type: 22
                  softFail: false
                  description: TestReplaceRowCsv
                  provider:
                    url: 'http://some.company.com/url/{DATA}'
                    tag: Fred
                    staticData: |-
                      A,B,C
                      1,2,3
                      4,5,6
                    type: 3
                - fromColumn: From_Column
                  toColumn: To_Column
                  type: 23
                  softFail: false
                  description: TestReplaceColCsv
                  provider:
                    url: 'http://some.company.com/url/{DATA}'
                    tag: Fred
                    staticData: |-
                      A,B,C
                      1,2,3
                      4,5,6
                    type: 3
        '500':
          description: Error
          headers: {}
          examples: {}
          schema: {}
      deprecated: false
      security:
        - {}
      consumes:
        - application/json
      produces:
        - application/json
  /templatePackage:
    put:
      tags: []
      summary: ''
      description: Load a template package
      parameters:
        - schema:
            type: object
            properties:
              templates:
                type: array
                items:
                  $ref: '#/definitions/template'
          description: ''
          name: body
          in: body
      responses:
        '200':
          schema:
            type: object
            properties:
              templates:
                type: array
                items:
                  $ref: '#/definitions/template'
          description: Success
          examples:
            application/json:
              templates:
                - collection: system
                  name: status
                  columnValue: ''
                  description: Status page
                  outputFile: ''
                  content: some content
                  directives:
                    - notLast:
                        - ''
                      onlyLast:
                        - ''
                      type: 21
                      softFail: false
                      description: Insert Cache Stats
                      provider:
                        url: ''
                        tag: CACHE_STATS
                        staticData: ''
                        type: 3
                - collection: system
                  name: default
                  columnValue: ''
                  description: The Default Template
                  outputFile: ''
                  content: some content
                  directives: []
                - collection: system
                  name: statusCache
                  columnValue: ''
                  description: ''
                  outputFile: ''
                  content: some content
                  directives: []
        '500':
          description: Error
          headers: {}
          examples: {}
          schema: {}
      deprecated: false
      security:
        - {}
      consumes:
        - application/json
      produces:
        - application/json
  /directives:
    get:
      tags: []
      summary: ''
      description: get a list of all supported directives
      responses:
        '200':
          schema: {}
          description: Success
          examples:
            application/json:
              - tags: []
                type: 0
                softFail: false
                description: Require Tags
              - from: ''
                to: ''
                type: 1
                softFail: false
                description: Add a Replace Value
              - notLast: []
                onlyLast: []
                type: 2
                softFail: false
                description: Insert Subtemplates from Tagged Data
                provider:
                  tag: ''
                  condition: 0
                  list: false
                  value: ''
                  type: 2
              - notLast: []
                onlyLast: []
                type: 21
                softFail: false
                description: Insert Subtemplates from CSV Data
                provider:
                  url: ''
                  tag: ''
                  staticData: ''
                  type: 3
              - type: 22
                softFail: false
                description: Add Replace from CSV Row
                provider:
                  url: ''
                  tag: ''
                  staticData: ''
                  type: 3
              - fromColumn: ''
                toColumn: ''
                type: 23
                softFail: false
                description: Add Replace from CSV Column
                provider:
                  url: ''
                  tag: ''
                  staticData: ''
                  type: 3
              - notLast: []
                onlyLast: []
                type: 10
                softFail: false
                description: Insert Subtemplates from SQL Data
                provider:
                  source: ''
                  columns: ''
                  from: ''
                  where: ''
                  type: 1
              - type: 11
                softFail: false
                description: Add Replace from SQL Row
                provider:
                  source: ''
                  columns: ''
                  from: ''
                  where: ''
                  type: 1
              - fromColumn: ''
                toColumn: ''
                type: 12
                softFail: false
                description: Add Replace from SQL Column
                provider:
                  source: ''
                  columns: ''
                  from: ''
                  where: ''
                  type: 1
      deprecated: false
      security:
        - {}
      produces:
        - application/json
  '/templates/{id}':
    get:
      tags: []
      summary: ''
      description: Get a list of template names for a given Collection and optionally Name
      parameters:
        - description: 'collection/[name]'
          name: id
          required: true
          type: string
          in: path
      responses:
        '200':
          schema: {}
          description: Success
          examples:
            application/json:
              - collection: system
                name: default
                columnValue: ''
              - collection: system
                name: status
                columnValue: ''
              - collection: system
                name: statusCache
                columnValue: ''
        '500':
          description: Error
          headers: {}
          examples: {}
          schema: {}
      deprecated: false
      security:
        - {}
      produces:
        - application/json
  /collections:
    get:
      tags: []
      summary: ''
      description: get a list of all template collections
      responses:
        '200':
          schema:
            type: array
            items:
              type: object
              properties:
                collection:
                  type: string
          description: Success - List of Collections
          examples:
            application/json:
              - collection: aetk
              - collection: error
              - collection: system
              - collection: test_jdbc
              - collection: training
      deprecated: false
      security:
        - {}
      produces:
        - application/json
  '/archive/{id}':
    delete:
      tags: []
      summary: ''
      description: Remove a generated archive from the server. Call after downloading generated archive.
      parameters:
        - description: 'archive file name, as reported in the {DragonFlyOutputFile} value of a merge.'
          name: id
          required: true
          type: string
          in: path
        - schema: {}
          description: ''
          name: body
          in: body
      responses:
        '200':
          schema:
            type: string
          description: Success
          examples: {}
          headers: {}
        '500':
          description: Not Found Error
          headers: {}
          examples: {}
          schema:
            type: string
      deprecated: false
      security:
        - {}
  '/merge/{id}':
    get:
      tags: []
      summary: ''
      description: Merge a template and return the output
      parameters:
        - description: Template full name
          name: id
          required: true
          type: string
          in: path
      responses:
        '200':
          schema: {}
          description: Merge Output
          examples: {}
      deprecated: false
      externalDocs:
        url: idmu.mybluemix.net
        description: IBM Data Merge Utility documentation
      security:
        - {}
  '/template/{id}':
    get:
      tags: []
      summary: ''
      description: Get a Template
      parameters:
        - description: Template Full Name (collection.name.column)
          name: id
          type: string
          required: true
          in: path
      responses:
        '200':
          schema:
            $ref: '#/definitions/template'
          description: Success
          examples:
            application/json:
              collection: test
              name: allDirectives
              columnValue: all
              description: The Testing Template
              outputFile: ''
              content: This is the Testing Template Content
              directives:
                - tags:
                    - Foo
                    - empty
                  type: 0
                  softFail: false
                  description: TestRequire
                - from: Foobar
                  to: Test Foo Value
                  type: 1
                  softFail: false
                  description: Test Replace1
                - notLast:
                    - one
                    - two
                  onlyLast:
                    - three
                    - four
                  type: 2
                  softFail: false
                  description: TestInsertSubsTag
                  provider:
                    tag: Foo
                    condition: 0
                    list: false
                    value: bar
                    type: 2
                - notLast:
                    - one
                    - two
                  onlyLast:
                    - three
                    - four
                  type: 10
                  softFail: false
                  description: TestInsertSubsSql
                  provider:
                    source: DB
                    columns: 'Col1, Col2, Col3'
                    from: 'Table1, Table2'
                    where: Table1.value = table2.value
                    type: 1
                - type: 11
                  softFail: false
                  description: TestReplaceRowSql
                  provider:
                    source: DB
                    columns: 'Col1, Col2, Col3'
                    from: 'Table1, Table2'
                    where: Table1.value = table2.value
                    type: 1
                - fromColumn: from_col
                  toColumn: to_col
                  type: 12
                  softFail: false
                  description: TestReplaceColSql
                  provider:
                    source: DB
                    columns: 'Col1, Col2, Col3'
                    from: 'Table1, Table2'
                    where: Table1.value = table2.value
                    type: 1
                - notLast:
                    - one
                    - two
                  onlyLast:
                    - three
                    - four
                  type: 21
                  softFail: false
                  description: TestInsertSubsCsv
                  provider:
                    url: 'http://some.company.com/url/{DATA}'
                    tag: Fred
                    staticData: |-
                      A,B,C
                      1,2,3
                      4,5,6
                    type: 3
                - type: 22
                  softFail: false
                  description: TestReplaceRowCsv
                  provider:
                    url: 'http://some.company.com/url/{DATA}'
                    tag: Fred
                    staticData: |-
                      A,B,C
                      1,2,3
                      4,5,6
                    type: 3
                - fromColumn: From_Column
                  toColumn: To_Column
                  type: 23
                  softFail: false
                  description: TestReplaceColCsv
                  provider:
                    url: 'http://some.company.com/url/{DATA}'
                    tag: Fred
                    staticData: |-
                      A,B,C
                      1,2,3
                      4,5,6
                    type: 3
        '500':
          description: Not Found
          headers: {}
          examples: {}
          schema:
            type: string
      deprecated: false
      security:
        - {}
      produces:
        - application/json
    delete:
      tags: []
      summary: ''
      description: Delete a Template
      parameters:
        - description: Template Full Name (collection.name.column)
          name: id
          required: true
          type: string
          in: path
        - schema: {}
          description: ''
          name: body
          in: body
      responses:
        '200':
          schema:
            type: string
          description: Success
          examples: {}
        '500':
          description: Not Found
          headers: {}
          examples: {}
          schema: {}
      deprecated: false
      security:
        - {}
  '/templatePackage/{id}':
    get:
      tags: []
      summary: ''
      description: Get a package of templates
      parameters:
        - description: coma separated list of collection names
          name: id
          type: string
          required: true
          in: path
      responses:
        '200':
          schema:
            type: object
            properties:
              templates:
                type: array
                items:
                  $ref: '#/definitions/template'
          description: Success
          examples:
            application/json:
              templates:
                - collection: system
                  name: status
                  columnValue: ''
                  description: Status page
                  outputFile: ''
                  content: some content
                  directives:
                    - notLast:
                        - ''
                      onlyLast:
                        - ''
                      type: 21
                      softFail: false
                      description: Insert Cache Stats
                      provider:
                        url: ''
                        tag: CACHE_STATS
                        staticData: ''
                        type: 3
                - collection: system
                  name: default
                  columnValue: ''
                  description: The Default Template
                  outputFile: ''
                  content: some content
                  directives: []
                - collection: system
                  name: statusCache
                  columnValue: ''
                  description: ''
                  outputFile: ''
                  content: some content
                  directives: []
      deprecated: false
      security:
        - {}
      produces:
        - application/json
    post:
      tags: []
      summary: ''
      description: Load a template package from the Packages Store
      parameters:
        - description: package file name
          name: id
          type: string
          required: true
          in: path
        - schema: {}
          description: ''
          name: body
          in: body
      responses:
        '200':
          schema:
            type: object
            properties:
              templates:
                type: array
                items:
                  $ref: '#/definitions/template'
          description: Success
          examples:
            application/json:
              templates:
                - collection: system
                  name: status
                  columnValue: ''
                  description: Status page
                  outputFile: ''
                  content: some content
                  directives:
                    - notLast:
                        - ''
                      onlyLast:
                        - ''
                      type: 21
                      softFail: false
                      description: Insert Cache Stats
                      provider:
                        url: ''
                        tag: CACHE_STATS
                        staticData: ''
                        type: 3
                - collection: system
                  name: default
                  columnValue: ''
                  description: The Default Template
                  outputFile: ''
                  content: some content
                  directives: []
                - collection: system
                  name: statusCache
                  columnValue: ''
                  description: ''
                  outputFile: ''
                  content: some content
                  directives: []
        '500':
          description: Error
          headers: {}
          examples: {}
          schema: {}
      deprecated: false
      security:
        - {}
      produces:
        - application/json
    delete:
      tags: []
      summary: ''
      description: Delete a whole bunch of templates
      parameters:
        - description: coma separated list of collection names
          name: id
          required: true
          type: string
          in: path
        - schema: {}
          description: ''
          name: body
          in: body
      responses:
        '200':
          schema:
            type: string
          description: Success
          examples: {}
        '500':
          description: Error
          headers: {}
          examples: {}
          schema: {}
      deprecated: false
      security:
        - {}
definitions:
  template:
    type: object
    properties:
      collection:
        type: string
      name:
        type: string
      columnValue:
        type: string
      description:
        type: string
      outputFile:
        type: string
      content:
        type: string
      directives:
        type: array
        items:
          $ref: '#/definitions/directive'
  providerCsv:
    type: object
    properties:
      type:
        type: integer
        maximum: 3
        minimum: 3
      tag:
        type: string
      url:
        type: string
      staticData:
        type: string
  providerTag:
    type: object
    properties:
      type:
        type: integer
        maximum: 2
        minimum: 2
      tag:
        type: string
      condition:
        type: integer
      list:
        type: boolean
      value:
        type: string
  providerSql:
    type: object
    properties:
      type:
        type: integer
        maximum: 1
        minimum: 1
      source:
        type: string
      columns:
        type: string
      from:
        type: string
      where:
        type: string
  directive:
    type: object
    discriminator: type
    properties:
      type:
        type: integer
      softFail:
        type: boolean
    required:
      - type
  directiveReplaceCol:
    type: object
    allOf:
      - $ref: '#/definitions/directive'
      - properties:
          fromColumn:
            type: string
          toColumn:
            type: string
  directiveInsert:
    type: object
    allOf:
      - $ref: '#/definitions/directive'
      - properties:
          notLast:
            type: array
            items:
              type: string
          onlyLast:
            type: array
            items:
              type: string
  directiveRequire:
    type: object
    allOf:
      - $ref: '#/definitions/directive'
      - properties:
          tags:
            type: array
            items:
              type: string
  directiveReplace:
    type: object
    allOf:
      - $ref: '#/definitions/directive'
      - properties:
          description:
            type: string
          from:
            type: string
          to:
            type: string
  directiveReplaceRowSql:
    type: object
    allOf:
      - $ref: '#/definitions/directive'
      - properties:
          provider:
            $ref: '#/definitions/providerSql'
  directiveReplaceRowCsv:
    type: object
    allOf:
      - $ref: '#/definitions/directive'
      - properties:
          provider:
            $ref: '#/definitions/providerCsv'
  directiveReplaceColCsv:
    type: object
    allOf:
      - $ref: '#/definitions/directiveReplaceCol'
      - properties:
          provider:
            $ref: '#/definitions/providerCsv'
  directiveReplaceColSql:
    type: object
    allOf:
      - $ref: '#/definitions/directiveReplaceCol'
      - properties:
          provider:
            $ref: '#/definitions/providerSql'
  directiveInsertTag:
    type: object
    allOf:
      - $ref: '#/definitions/directiveInsert'
      - properties:
          provider:
            $ref: '#/definitions/providerTag'
  directiveInsertSql:
    type: object
    allOf:
      - $ref: '#/definitions/directiveInsert'
      - properties:
          provider:
            $ref: '#/definitions/providerSql'
  directiveInsertCsv:
    type: object
    allOf:
      - $ref: '#/definitions/directiveInsert'
      - properties:
          provider:
            $ref: '#/definitions/providerCsv'
schemes:
  - https
tags: []
externalDocs:
  url: idmu.mybluemix.net
  description: 'Users Guide, Developers Guide and Administrators Guide'
securityDefinitions:
  Client ID:
    description: ''
    in: header
    name: X-IBM-Client-Id
    type: apiKey
security:
  - Client ID: []
x-ibm-configuration:
  enforced: true
  phase: realized
  testable: true
  gateway: micro-gateway
  assembly:
    execute:
      - invoke:
          title: invoke
          timeout: 60
          verb: GET
          cache-response: protocol
          cache-ttl: 900
          target-url: 'https://idmu.mybluemix.net/{request.path}/'
    catch: []
consumes:
  - application/json
produces:
  - application/json
